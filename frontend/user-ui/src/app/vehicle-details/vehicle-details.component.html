<mat-card class="card">
    <mat-card-header>
        <mat-card-title>Users Vehicle Details</mat-card-title>
        <span class="card-header-spacer"></span>
        <span>
            <button mat-flat-button color="accent" class="vehicle-button" *ngIf="vehicleIsEmpty"
                [routerLink]="['add-truck', userId]">add</button>
        </span>
    </mat-card-header>
    <mat-card-content *ngIf="vehicle && !vehicleIsEmpty">
        <mat-divider></mat-divider>
        <mat-card-header class="sub-header">
            <span>
                <mat-card-subtitle>Truck</mat-card-subtitle>
            </span>
            <span class="card-header-spacer"></span>
            <span>
                <button mat-flat-button color="accent" class="vehicle-button" (click)="editModeTruck=true"
                    [disabled]="editModeTruck">edit</button>
            </span>
        </mat-card-header>

        <div class="truck" *ngIf="vehicle.truck && !editModeTruck">
            <span>
                <p class="vehicle-data-headers">Model</p>
                <p class="vehicle-data">{{vehicle.truck.model}}</p>
            </span>
            <span>
                <p class="vehicle-data-headers">Type</p>
                <p class="vehicle-data">{{vehicle.truck.truckType}}</p>
            </span>
            <span>
                <p class="vehicle-data-headers">License Plate</p>
                <p class="vehicle-data">{{vehicle.truck.truckLicensePlate}}</p>
            </span>
            <span>
                <p class="vehicle-data-headers">Fuel Tanks (left/right)</p>
                <p class="vehicle-data">{{vehicle.truck.leftTankFuelCapacity}}/{{vehicle.truck.rightTankFuelCapacity}}
                </p>
            </span>
            <span>
                <p class="vehicle-data-headers">Adblue Tank</p>
                <p class="vehicle-data">{{vehicle.truck.adBlueCapacity}}</p>
            </span>
        </div>

        <div class="truck" *ngIf="vehicle.truck && editModeTruck">

            <app-edit-truck [truck]="vehicle.truck" (mode)="editModeTruck = $event" (updatedTruck)="vehicle.truck = $event"></app-edit-truck>

        </div>

        <mat-divider></mat-divider>
        <mat-card-header class="sub-header">
            <span>
                <mat-card-subtitle>Trailer</mat-card-subtitle>
            </span>
            <span class="card-header-spacer"></span>
            <span>
                <button mat-flat-button color="accent" class="vehicle-button" *ngIf="validateTrailerFrom"
                    [routerLink]="['add-trailer', vehicleId]">add</button>
                <button mat-flat-button color="accent" class="vehicle-button" (click)="editModeTrailer=true"
                    [disabled]="editModeTrailer">edit</button>
            </span>
        </mat-card-header>

        <div class="trailer" *ngIf="vehicle.trailer && !editModeTrailer">
            <span>
                <p class="vehicle-data-headers">Type</p>
                <p class="vehicle-data">{{vehicle.trailer.trailerType}}</p>
            </span>
            <span>
                <p class="vehicle-data-headers">License Plate</p>
                <p class="vehicle-data">{{vehicle.trailer.trailerLicensePlate}}</p>
            </span>
            <span>
                <p class="vehicle-data-headers">Fuel Tank</p>
                <p class="vehicle-data">{{vehicle.trailer.trailerFuelCapacity}}</p>
            </span>
        </div>

        <div class="truck" *ngIf="vehicle.truck && editModeTrailer">

            <app-edit-trailer [trailer]="vehicle.trailer" [vehicleId]="vehicleId" (mode)="editModeTrailer = $event" (updatedTrailer)="vehicle.trailer = $event"></app-edit-trailer>

        </div>

        <mat-divider></mat-divider>
        <mat-card-header class="sub-header">
            <span>
                <mat-card-subtitle>Vehicle Image</mat-card-subtitle>
            </span>
            <span class="card-header-spacer"></span>
            <span>
                <button mat-flat-button color="accent" class="vehicle-button" *ngIf="validateImageFrom"
                    [routerLink]="['add-image', vehicleId]">add</button>
                <button mat-flat-button color="accent" class="vehicle-button" (click)="editImageInfo()"
                    [disabled]="editModeImageInfo">edit</button>
            </span>
        </mat-card-header>

        <div class="truck-image" *ngIf="vehicle.image && !editModeImageInfo">
            <span>
                <p class="vehicle-data-headers">Name</p>
                <p class="vehicle-data">{{vehicle.image.vehicleImageName}}</p>&nbsp;
            </span>
            <span>
                <p class="vehicle-data-headers">Description</p>
                <p class="vehicle-data">{{vehicle.image.vehicleImageDescription}}</p>&nbsp;
            </span>
            <span>
                <p class="vehicle-data-headers">Image</p>
                <div class="image-wrapper">
                    <div *ngIf="vehicle.image.vehicleImageDirectLink; else elseBlock">
                        <img src={{vehicle.image.vehicleImageDirectLink}}>
                        <button mat-mini-fab color="accent" (click)="deleteVehicleImage()">
                            <mat-icon>delete_sweep</mat-icon>
                        </button>
                    </div>
                    <ng-template #elseBlock>
                        <input (change)="onChange($event)" type="file">
                        <button mat-icon-button (click)="uploadImage()">
                            <mat-icon>cloud_upload</mat-icon>
                        </button>
                        <div>
                            <img
                                src="http://res.cloudinary.com/dzwnsabwr/image/upload/v1674478194/akiizaq8ftpw8bpgq3hb.png">
                        </div>
                    </ng-template>
                </div>
            </span>
        </div>

        <div class="truck-image" *ngIf="vehicle.image && editModeImageInfo">

            <form [formGroup]="imageInfoEditForm" (ngSubmit)="saveEditedImageInfo()">
                <span>
                    <p class="vehicle-data-headers">Name</p>
                    <p class="vehicle-data"><input formControlName="name" required></p>
                </span>
                <span>
                    <p class="vehicle-data-headers">Description</p>
                    <p class="vehicle-data"><input formControlName="description" required></p>
                </span>
                <span>
                    <p>&nbsp;</p>
                    <p>
                        <button mat-flat-button (click)="editModeImageInfo = false">Cancel</button>
                        <button mat-flat-button>Submit</button>
                    </p>
                </span>
            </form>

        </div>
    </mat-card-content>
    <mat-card-actions>
        <button mat-button *ngIf="!vehicleIsEmpty" (click)="deleteVehicle()">DELETE</button>
    </mat-card-actions>
</mat-card>